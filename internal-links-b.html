<!DOCTYPE html>
<html>
<head>
	<!-- META -->
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="A collection of datasets for rstats">
	<meta name="keywords" content="David, Christopher, Ruvolo">
	<meta name="author" content="David Ruvolo">
	<!-- LINK -->
	<style type="text/css">
	.header{
		background-color: #DB6C79;
		margin-bottom: 2em;
	}

	.header-content{
		width: 90%;
		margin: auto;
		padding:5em 0 5em 0;
		color: white;
	}

	.header-content h1{
		font-size: 5rem;
		margin: 0;
		font-weight: 600;
	}

	.header-content p{
		font-size: 1.5rem;
		font-weight: 300;
	}
	@media screen and (min-width: 800px) {
	
		.container{
			width: 100%;
			margin: auto;
			display: flex;
			justify-content: center;
			align-items: top;
		}

		.column{padding: 35px;}

		.col-main{width: 75%; display: inline-block;}
		.col-side{width: 25%; display: inline-block;}

		.col-side p{
			font-size: 11pt;
			color: #525252;
		}
		.toc-wrapper{
			position: -webkit-sticky;
			position: sticky;
			top: 0;

		}
		.toc-links{list-style: none;}
		.toc-links>li{
			font-size: 14pt;
			line-height: 1.5;
		}
		.toc-links>li:before{
			content: "\25E6";
			width: 1em;
			margin-left: -1em;
			padding: 2px;
			color: #2D7DDD;
		}

		.toc-links-nested{list-style: none;}
		.toc-links-nested li{
			font-size: 11pt;
			line-height: 1.5;
		}
		.toc-links-nested li:before{
			content: "\2014";
			width: 1em;
			margin-left: -1em;
			padding: 2px;
			color: #424242;
		}
		.toc-links-nested li a{color:#424242;}
	}
</style>
<link rel="preload" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400" as="style" onload="this.rel='stylesheet'">
<link rel="preload" href="https://use.fontawesome.com/9ec86712d8.css" as="style" onload="this.rel='stylesheet'">
<!-- <link rel="preload" href="css/styles.css" as="style" onload="this.rel='stylesheet'"> -->
<link rel="preload" href="css/styles.min.css" as="style" onload="this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://use.fontawesome.com/9ec86712d8.css"></noscript>
<!-- <noscript><link rel="stylesheet" href="css/styles.css"></noscript> -->
<noscript><link rel="stylesheet" href="css/styles.min.css"></noscript>
<script>
	/*! loadCSS. [c]2017 Filament Group, Inc. MIT License */
	!function(a){"use strict";var b=function(b,c,d){function j(a){if(e.body)return a();setTimeout(function(){j(a)})}function l(){f.addEventListener&&f.removeEventListener("load",l),f.media=d||"all"}var g,e=a.document,f=e.createElement("link");if(c)g=c;else{var h=(e.body||e.getElementsByTagName("head")[0]).childNodes;g=h[h.length-1]}var i=e.styleSheets;f.rel="stylesheet",f.href=b,f.media="only x",j(function(){g.parentNode.insertBefore(f,c?g:g.nextSibling)});var k=function(a){for(var b=f.href,c=i.length;c--;)if(i[c].href===b)return a();setTimeout(function(){k(a)})};return f.addEventListener&&f.addEventListener("load",l),f.onloadcssdefined=k,k(l),f};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);
	/*! loadCSS rel=preload polyfill. [c]2017 Filament Group, Inc. MIT License */
	!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(a){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);
</script>
<title>dcrData | Shiny App Tutorials</title>
</head>
<body>
	<!-- //////////////////////////////////////////////// -->
	<!-- header -->
	<div class="header">
		<div class="header-content">
			<h1>Shiny Tutorial: Linking Tabs (2)</h1>
			<p>Tutorial on Creating Links to Other Pages from a Leaflet Map</p>
		</div>
	</div>
	<div class="breadcrumbs-wrapper">
		<ul class="breadcrumbs">
			<li><a href="index.html"><span class="fa fa-home"></span></a></li>
			<li>Linking Tabs (2)</li>
		</ul>
	</div>
	<!-- //////////////////////////////////////////////// -->
	<div class="container">
		<div class="column col-side">
			<div class="toc-wrapper">
				<h2>Contents</h2>
				<ul class="toc-links">
					<li><a href="">Back to Top</a></li>
					<li><a href="#hrefs-ex-2-about">Why would I need to set hrefs?</a></li>
					<li><a href="#hrefs-ex-2-work">How do I set the links?</a></li>
					<li><a href="#hrefs-ex-2-run">How do I run the demo?</a></li>
				</ul>
			</div>
		</div>
		<!-- //////////////////////////////////////////////// -->
		<div class="column col-main">
			<!-- body -->
			<div class="content">
				
				<div class="app-block" id="hrefs-ex-2">
					
					<!-- need -->
					<h2 id="hrefs-ex-2-about">Why would I need this?</h2>
					<p>This demo expands on the previous section by showing how you can create a link to another tab from a leaflet map. This can approach can be adapted for use with your favorite data vis package.</p>
					<!-- work -->
					<h2 id="hrefs-ex-2-work">How does the app work?</h2>
					<p>See the previous section for information on how to build a shiny app using this work around. In this section, I'll demonstrate how to make links using leaflet.</p>
					<h3>1. Setup the ui and enter the value names for each tab.</h3>
					<p>In this example, I created a mini-tourism app for NYC</p>
					<pre><code>
						<span class="comment"># ui.R/app.R</span>
						<span class="object">ui</span> <- <span class="function">tagList</span>(
						        <span class="comment"># head</span>
						        <span class="object">tags</span>$<span class="function">head</span>(
						        	<span class="object">tags</span>$<span class="function">link</span>(<span class="argument">src</span>=<span class="value">"func.js"</span>)
						        	<span class="comment">...</span>
						        )

						        <span class="comment"># ui</span>
						        <span class="function">navbarPage</span>(
					                <span class="function">tabPanel</span>(<span class="value">"Central Park Zoo"</span>, 
					                			<span class="argument">value</span>=<span class="value">"zoo"</span>),
					                <span class="function">tabPanel</span>(<span class="value">"Guggenheim Museum"</span>, 
					                			<span class="argument">value</span>=<span class="value">"guggenheim"</span>),
					                <span class="function">tabPanel</span>(<span class="value">"Natural History Museum"</span>, 
					                			<span class="argument">value</span>=<span class="value">"history"</span>))
						)
					</code></pre>
					<h3>2. Create a dataset</h3>
					<p>Create a dataset where column <code class="argument">hrefValue</code> has the same tab value names.</p>
					<pre><code>
						<span class="object">mapDF</span> <- <span class="function">data.frame</span>(
							<span class="argument">location</span>= c(<span class="value">"Central Park Zoo"</span>, 
																<span class="value">"Guggenheim Museum"</span>, 
																<span class="value">"Natural History Museum"</span>),
							<span class="argument">lat</span>= c(<span class="value">40.76780</span>, <span class="value">40.78292</span>, <span class="value">40.78133</span>),
							<span class="argument">lng</span>= c(<span class="value">-73.97191</span>,<span class="value">-73.95907</span>, <span class="value">-73.97413</span>),
							<span class="argument">hrefValue</span>= c(<span class="value">"zoo"</span>,<span class="value">"guggenheim"</span>,<span class="value">"history"</span>))
					</code></pre>
					<h3>3. Create a content for marker popups</h3>
					<p>The links to other tabs will go into a leaflet <code class="argument">popup</code>. For the <code class="argument">popup</code> argument in <code class="function">addMarkers()</code>, you will need to wrap the target value in <code class="function">paste0()</code> (unless the <code class="argument">onclick</code> works in <code class="function">a()</code>. Leaflet will render this a url. This will look something like this:</p>
					<pre><code>
					<span class="function">leaflet</span>(<span class="argument">data</span> = <span class="value">mapDF</span>) %>%
			            <span class="function">setView</span>(
			                <span class="argument">lat</span>= <span class="value">40.7752739</span>, 
			                <span class="argument">lng</span>= <span class="value">-73.9688518</span>,
			                <span class="argument">zoom</span>= <span class="value">14</span>) %>%
			            <span class="function">addTiles</span>() %>%
			            <span class="argument">addMarkers</span>(<span class="argument">lng</span> = <span class="value">~lng</span>, <span class="argument">lat</span> = <span class="value">~lat</span>,
			                       <span class="argument">popup</span> = <span class="function">paste0</span>(
			                           <span class="value">"Learn more about the "</span>,
			                           <span class="value">"&lt;a onclick="</span>,
			                           "<span class="function">customHref</span>('",
			                           			<span class="object">mapDF$hrefValue</span>,<span class="value">"')&gt;"</span>,
			                           <span class="object">mapDF$location</span>,
			                           <span class="value">"&lt;/a&gt;"</span>))
					</code></pre>
					<p>That's it!</p>
					<!-- run app -->
					<h2 id="hrefs-ex-2-run">How can I run this app?</h2>
					<p>There are two ways to run this app:</p>
					<pre><code>
						<span class="comment"># 1. Run in R/Rstudio</span>
						<span class="function">install.packages</span>("<span class="package">shiny</span>")

						<span class="package">shiny</span>::<span class="function">runGitHub</span>(
								<span class="argument">repo</span>=<span class="value">"shinyapps"</span>,
								<span class="argument">username</span>=<span class="value">"davidruvolo51"</span>,
								<span class="argument">subdir</span>=<span class="value">"Internal-Links"</span>)

						<span class="comment"># 2. Run from the terminal</span>
						<span class="object">Rscript -e "</span><span class="package">shiny</span>::<span class="function">runGitHub</span>(
								<span class="argument">repo</span>=<span class="value">"shinyapps"</span>,
								<span class="argument">username</span>=<span class="value">"davidruvolo51"</span>,
								<span class="argument">subdir</span>=<span class="value">"Internal-Links"</span>,
								<span class="argument">launch.browser</span>=<span class="logical">TRUE</span>)"
					</code></pre>
					<p>The source code is available on <a class="eLinks" href="https://github.com/davidruvolo51/shinyAppTutorials/tree/master/Internal-Links">github</a>.</p>
					<ul class="tags">
						<li>js</li>
						<li>workaround</li>
						<li>hrefs</li>
						<li>leaflet</li>
					</ul>
				</div>
			</div>
		</div>
	</div>
</body>
<footer>
	<p>If you'd like to contribute to this collection, open up a pull request on <a href="https://github.com/davidruvolo51/shinyAppTutorials">github</a>.</p>
	<p>Made with <i class="fa fa-heart"></i> and <i class="fa fa-coffee"></i> by <a href="https://davidruvolo51.github.io">david ruvolo</a></p>
</footer>
</html>